Ch√†o b·∫°n, ƒë√¢y l√† l·ªùi gi·∫£i chi ti·∫øt cho B√†i t·∫≠p 6.

B√†i t·∫≠p n√†y l√† m·ªôt v√≠ d·ª• kinh ƒëi·ªÉn v·ªÅ vi·ªác **ƒë·ªçc file c√≥ c·∫•u tr√∫c** v√† **ghi file c√≥ c·∫•u tr√∫c**. Y√™u c·∫ßu n√†y gi·ªëng h·ªát v·ªõi ch·ª©c nƒÉng c·ªßa c√°c file `main.cpp`, `mylib.cpp`, v√† `mylib.h` m√† b·∫°n ƒë√£ cung c·∫•p.

T√¥i s·∫Ω t·ªïng h·ª£p logic t·ª´ c√°c file ƒë√≥ v√†o m·ªôt file duy nh·∫•t v√† th√™m c√°c ch√∫ th√≠ch chi ti·∫øt ƒë·ªÉ sinh vi√™n d·ªÖ hi·ªÉu. Ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng k·ªπ thu·∫≠t **Code M·∫´u 1** (ƒê·ªçc/Ghi File VƒÉn B·∫£n C√≥ C·∫•u Tr√∫c).

-----

### Sorting B√†i 6: S·∫Øp X·∫øp D√£y S·ªë T·ª´ File

ƒê√¢y l√† code C++ ho√†n ch·ªânh cho ch∆∞∆°ng tr√¨nh.

```cpp
/*
 * Giai Bai tap 6: Doc mang so nguyen tu file, sap xep tang dan
 * va ghi ket qua vao file moi.
 *
 * Chuong trinh nay dua tren logic cua cac file mylib.cpp, mylib.h,
 * va main.cpp.
 */
#include <stdio.h>
#include <stdlib.h> // De dung ham exit()

// Dinh nghia so phan tu toi da cua mang
#define MAX 100

// ===================================================================
// Dinh nghia cac ham
// ===================================================================

/**
 * @brief Doc mang 1 chieu tu file co cau truc
 * @param fname Ten file de doc (vi du: "mang_bandau.txt")
 * @param a Mang de luu du lieu
 * @param n So phan tu (truyen tham chieu de cap nhat)
 * (Logic dua tren ham NhapMangTuFile tu mylib.cpp)
 */
void DocMangTuFile(char fname[], int a[], int &n) {
    // 1. Khai bao con tro file
    FILE *fp;

    // 2. Mo file o che do "rt" (read text - doc van ban)
    fp = fopen(fname, "rt");

    // 3. Kiem tra mo file
    if (fp == NULL) {
        printf("Loi: Khong the mo file dau vao %s\n", fname);
        exit(1); // Thoat chuong trinh neu file loi
    }

    // 4. Doc du lieu tu file
    // Doc dong 1 (so luong phan tu n)
    // Them \n de fscanf bo qua ky tu xuong dong
    fscanf(fp, "%d\n", &n);

    // Kiem tra so luong phan tu co hop le khong
    if (n <= 0 || n > MAX) {
        printf("Loi: So luong phan tu %d khong hop le.\n", n);
        fclose(fp);
        exit(1);
    }

    // Doc dong 2 (n phan tu cua mang)
    for (int i = 0; i < n; i++) {
        fscanf(fp, "%d", &a[i]);
    }

    // 5. Dong file sau khi hoan tat
    fclose(fp);
    printf("Doc file %s thanh cong.\n", fname);
}

/**
 * @brief Ghi mang 1 chieu vao file voi cau truc tuong ung
 * @param fname Ten file de ghi (vi du: "mang_daxep.txt")
 * @param a Mang chua du lieu
 * @param n So phan tu
 * (Logic dua tren ham GhiMangVaoFile tu mylib.cpp)
 */
void GhiMangVaoFile(char fname[], int a[], int n) {
    // 1. Mo file o che do "wt" (write text - ghi van ban)
    // 'w' se tao file moi hoac ghi de neu file da ton tai
    FILE *fp = fopen(fname, "wt");

    // 2. Kiem tra mo file
    if (fp == NULL) {
        printf("Loi: Khong the mo file dau ra %s\n", fname);
        return;
    }

    // 3. Ghi du lieu vao file (theo dung format yeu cau)
    // Ghi so luong n vao dong 1
    fprintf(fp, "%d\n", n);

    // Ghi n phan tu vao dong 2, cach nhau bang khoang trang
    for (int i = 0; i < n; i++) {
        fprintf(fp, "%d ", a[i]);
    }

    // 4. Dong file
    fclose(fp);
    printf("Ghi file %s thanh cong.\n", fname);
}

/**
 * @brief Sap xep mang tang dan (Interchange Sort)
 * @param a Mang can sap xep
 * @param n So luong phan tu
 * (Logic dua tren ham SapXepTangDan tu mylib.cpp)
 */
void SapXepTangDan(int a[], int n) {
    for (int i = 0; i < n - 1; i++) {
        for (int j = i + 1; j < n; j++) {
            // Neu phan tu dung truoc > phan tu dung sau (sai thu tu)
            if (a[i] > a[j]) {
                // thi hoan vi
                int t = a[i];
                a[i] = a[j];
                a[j] = t;
            }
        }
    }
}

/**
 * @brief Xuat mang ra man hinh
 * (Logic dua tren ham XuatMang tu mylib.cpp)
 */
void XuatMang(int a[], int n) {
    for (int i = 0; i < n; i++)
        printf("%d ", a[i]);
    printf("\n");
}


// ===================================================================
// Chuong trinh chinh
// ===================================================================
int main() {
    int a[MAX]; // Mang de luu du lieu
    int n;      // So luong phan tu thuc te
    
    // Ten file dau vao va dau ra
    char file_vao[] = "mang_bandau.txt";
    char file_ra[] = "mang_daxep.txt";

    // --- Buoc 1: Doc mang tu file ---
    DocMangTuFile(file_vao, a, n);

    // --- Buoc 2: In mang ban dau ra man hinh ---
    printf("Mang ban dau doc tu file:\n");
    XuatMang(a, n);

    // --- Buoc 3: Sap xep mang ---
    SapXepTangDan(a, n);
    printf("\nMang sau khi sap xep tang dan:\n");
    XuatMang(a, n);

    // --- Buoc 4: Ghi mang da sap xep vao file moi ---
    GhiMangVaoFile(file_ra, a, n);

    return 0;
}
```

### üìã H∆∞·ªõng D·∫´n Th·ª±c H√†nh

1.  **T·∫°o file `mang_bandau.txt`:**
    T·∫°o m·ªôt file vƒÉn b·∫£n t√™n l√† `mang_bandau.txt` (ƒë·∫∑t c√πng th∆∞ m·ª•c v·ªõi file `.exe` khi ch·∫°y) v√† nh·∫≠p n·ªôi dung v√≠ d·ª•:

    ```text
    5
    3 2 1 8 6
    ```

    (B·∫°n c≈©ng c√≥ th·ªÉ d√πng file `mang1chieu.txt` ƒë√£ c√≥, ch·ªâ c·∫ßn ƒë·ªïi t√™n `file_vao` trong code).

2.  **Bi√™n d·ªãch v√† Ch·∫°y Code:**

3.  **K·∫øt Qu·∫£:**

      * **Tr√™n m√†n h√¨nh (Console):**
        ```text
        Doc file mang_bandau.txt thanh cong.
        Mang ban dau doc tu file:
        3 2 1 8 6

        Mang sau khi sap xep tang dan:
        1 2 3 6 8

        Ghi file mang_daxep.txt thanh cong.
        ```
      * **File `mang_daxep.txt` (s·∫Ω ƒë∆∞·ª£c t·∫°o ra):**
        ```text
        5
        1 2 3 6 8 
        ```