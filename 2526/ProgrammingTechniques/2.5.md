Ch√†o b·∫°n, ƒë√¢y l√† l·ªùi gi·∫£i chi ti·∫øt cho B√†i t·∫≠p 5.

B√†i t·∫≠p n√†y y√™u c·∫ßu k·ªπ thu·∫≠t **ƒë·ªçc file vƒÉn b·∫£n c√≥ ƒë·ªãnh d·∫°ng** (gi·ªëng file `dssv.txt` v√† k·ªπ thu·∫≠t trong `XulyFile.cpp`). Ch√∫ng ta s·∫Ω ƒë·ªçc t·ª´ng d√≤ng, b√≥c t√°ch d·ªØ li·ªáu b·∫±ng `fscanf` d·ª±a v√†o d·∫•u ph·∫©y, l∆∞u v√†o m·ªôt m·∫£ng c√°c `struct`, sau ƒë√≥ s·∫Øp x·∫øp m·∫£ng n√†y.

ƒê√¢y l√† code C++ ho√†n ch·ªânh v·ªõi c√°c ch√∫ th√≠ch gi·∫£i th√≠ch chi ti·∫øt:

-----

### üìù B√†i 5: Qu·∫£n l√Ω v√† S·∫Øp x·∫øp Sinh vi√™n t·ª´ File

```cpp
/*
 * Giai Bai tap 5: Doc file danh sach sinh vien,
 * sap xep giam dan theo DTB va in ra man hinh.
 *
 * Chuong trinh nay su dung logic tu file 'XulyFile.cpp'
 * va file du lieu 'dssv.txt'.
 */
#include <stdio.h>
#include <stdlib.h> // De dung ham exit()
#include <string.h> // De dung ham strcmp() (mac du bai nay khong can)

// Dinh nghia so luong sinh vien toi da
#define MAX_SV 100

// ===================================================================
// Khai bao kieu struct SinhVien
// ===================================================================
// Dinh nghia mot kieu du lieu de gom nhom thong tin
typedef struct {
    char MSSV[9];       // Ma so sinh vien
    char hoTen[30];     // Ho va ten
    float DTB;          // Diem trung binh
} SinhVien;


// ===================================================================
// Dinh nghia cac ham
// ===================================================================

/**
 * @brief Doc danh sach sinh vien tu file (dinh dang CSV)
 * @param fname Ten file de doc (vi du: "dssv.txt")
 * @param sv Mang struct de luu du lieu
 * @param soSV So luong SV doc duoc (truyen tham chieu de cap nhat)
 */
void DocDSSV(char fname[], SinhVien sv[], int &soSV) {
    // 1. Khoi tao so luong
    soSV = 0;
    
    // 2. Mo file o che do "rt" (read text - doc van ban)
    FILE *fp = fopen(fname, "rt");

    // 3. Kiem tra mo file
    if (fp == NULL) {
        printf("Loi: Khong the mo file %s\n", fname);
        exit(1); // Thoat chuong trinh neu file loi
    }

    printf("Dang doc file %s...\n", fname);

    // 4. Doc file cho den khi ket thuc
    // Chung ta su dung mot vong lap doc den khi fscanf khong the
    // doc dung 3 truong du lieu yeu cau nua.
    // Day la cach an toan hon so voi while(!feof(fp)).
    
    /*
     * Giai thich chuoi dinh dang cua fscanf: "%[^,], %[^,], %f\n"
     * * %[^,]  : Doc mot chuoi ky tu (string) cho DEN KHI gap dau phay ','.
     * -> Day la MSSV
     * * ,     : Doc va bo qua 1 dau phay va 1 khoang trang.
     * * %[^,]  : Doc chuoi ky tu tiep theo cho DEN KHI gap dau phay ','.
     * -> Day la HoTen
     * * ,     : Doc va bo qua 1 dau phay va 1 khoang trang.
     * * %f\n    : Doc 1 so thuc (float) va doc luon ky tu xuong dong '\n'.
     * -> Day la DTB
     */
    while (fscanf(fp, "%[^,], %[^,], %f\n", 
                  &sv[soSV].MSSV, 
                  &sv[soSV].hoTen, 
                  &sv[soSV].DTB) == 3) // Kiem tra doc thanh cong 3 muc
    {
        // Neu doc thanh cong, tang so luong sinh vien len
        soSV++;
        
        // Kiem tra tran bo nho
        if (soSV >= MAX_SV) {
            printf("Canh bao: So luong sinh vien vuot qua %d. Dung doc.\n", MAX_SV);
            break; // Thoat khoi vong lap
        }
    }

    // 5. Dong file
    fclose(fp);
    printf("Doc file thanh cong. Tong so sinh vien: %d\n", soSV);
}


/**
 * @brief Sap xep danh sach sinh vien GIAM DAN theo DTB
 * @param sv Mang sinh vien can sap xep
 * @param n So luong sinh vien
 */
void SapXepGiamDan(SinhVien sv[], int n) {
    // Su dung thuat toan Selection Sort (giong file XulyFile.cpp)
    for (int i = 0; i < n - 1; i++) {
        for (int j = i + 1; j < n; j++) {
            // Neu DTB cua sv[i] NHO HON sv[j] -> sai thu tu
            if (sv[i].DTB < sv[j].DTB) {
                // Hoan vi hai sinh vien
                SinhVien t = sv[i];
                sv[i] = sv[j];
                sv[j] = t;
            }
        }
    }
}

/**
 * @brief In danh sach sinh vien ra man hinh (co can le)
 * @param sv Mang sinh vien
 * @param n So luong sinh vien
 */
void InDSSV(SinhVien sv[], int n) {
    printf("\n--- DANH SACH SINH VIEN DA SAP XEP (Giam dan theo DTB) ---\n");
    // In tieu de cot
    printf("%-10s | %-25s | %-5s\n", "MSSV", "Ho Ten", "DTB");
    printf("---------------------------------------------------\n");
    
    // In du lieu tung sinh vien
    for (int i = 0; i < n; i++) {
        printf("%-10s | %-25s | %-5.2f\n", 
               sv[i].MSSV, 
               sv[i].hoTen, 
               sv[i].DTB);
    }
}


// ===================================================================
// Chuong trinh chinh
// ===================================================================
int main() {
    SinhVien ds[MAX_SV]; // Mang de luu danh sach
    int n;               // So luong sinh vien thuc te
    char tenFile[] = "dssv.txt"; // Ten file dau vao

    // 1. Doc du lieu tu file vao mang 'ds'
    DocDSSV(tenFile, ds, n);

    if (n > 0) { // Chi xu ly neu co du lieu
        // 2. Sap xep danh sach
        SapXepGiamDan(ds, n);

        // 3. In ket qua ra man hinh
        InDSSV(ds, n);
    } else {
        printf("Khong co du lieu de xu ly.\n");
    }

    return 0;
}
```

### üìã File ƒê·∫ßu V√†o (V√≠ d·ª•: `dssv.txt`)

ƒê·ªÉ ch·∫°y ch∆∞∆°ng tr√¨nh, b·∫°n c·∫ßn t·∫°o file `dssv.txt` n√†y v√† ƒë·∫∑t n√≥ **c√πng th∆∞ m·ª•c v·ªõi file `.exe`** c·ªßa ch∆∞∆°ng tr√¨nh.

```text
62131234, Nguyen Van Hung, 8.75
62134321, Truong Van Phi, 5.67
62134554, Luu Van Bi, 7.89
60131212, Tran Hoang Hieu, 7.23
61133311, Vo Minh Hoang, 5.67
```

### üñ•Ô∏è K·∫øt Qu·∫£ Xu·∫•t Ra M√†n H√¨nh

```text
Dang doc file dssv.txt...
Doc file thanh cong. Tong so sinh vien: 5

--- DANH SACH SINH VIEN DA SAP XEP (Giam dan theo DTB) ---
MSSV       | Ho Ten                    | DTB
---------------------------------------------------
62131234   | Nguyen Van Hung           | 8.75
62134554   | Luu Van Bi                | 7.89
60131212   | Tran Hoang Hieu           | 7.23
62134321   | Truong Van Phi            | 5.67
61133311   | Vo Minh Hoang             | 5.67
```